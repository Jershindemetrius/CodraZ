<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EduFlow Pro ‚Äî Student Scheduler & Study Companion</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>
  
  <div class="app">
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="brand-logo">üéì</div>
        <div class="brand-title">EduFlow Pro AI Assistant</div>
      </div>
      <nav class="nav" id="mainNav">
        <button class="nav-item active" data-nav="dashboard">üè† <span>Dashboard</span></button>
        <button class="nav-item" data-nav="assistant">ü§ñ <span>AI Assistant</span></button>
        <button class="nav-item" data-nav="schedule">üóì <span>Schedule</span></button>
        <button class="nav-item" data-nav="wellness">üíö <span>Wellness</span></button>
        <button class="nav-item" data-nav="profile">üë§ <span>Profile</span></button>
        <button class="nav-item" data-nav="settings">‚öôÔ∏è <span>Settings</span></button>
      </nav>
      <div class="sidebar-footer">
        <span id="copyrightYear">¬© 2025</span> EduFlow Pro AI Assistant v1.0
        <button id="toggleThemeBtn" class="theme-toggle" title="Toggle Theme">‚òÄÔ∏è</button>
      </div>
    </aside>

    <main class="content">

      <header class="title-block">
        <h1 id="mainTitle">Dashboard</h1>
        <div class="user-info">
          <span id="welcomeMessage">Loading...</span>
          <div class="user-avatar" id="userAvatar">
            <div class="avatar-initial">U</div>
          </div>
          <div class="avatar-dropdown" id="avatarDropdown">
            <button id="profileBtn">Profile</button>
            <button id="signoutBtn">Sign Out</button>
          </div>
        </div>
      </header>

      <section id="dashboardSection" data-view="dashboard">
        <div class="overview-grid">
          <div class="content-block focus-block">
            <h3>üéØ Today's Focus</h3>
            <h4 id="focusSubject">Loading...</h4>
            <p id="focusDescription">...</p>
            <div class="progress-wrap">
              <div class="progress-bar"><div id="focusProgressBar" style="width: 0%;"></div></div>
              <span id="focusProgressPct">0%</span>
            </div>
            <div id="focusTasks" class="focus-tasks-list"></div>
            <button id="startFocusSessionBtn" class="btn">Start Focus Session (Quiz)</button>
          </div>

          <div class="content-block weekly-progress">
            <h3>üìä Weekly Progress</h3>
            <div id="daysRow" class="days-row"></div>
            <p>Focus Score: <strong id="focusScore">N/A</strong> | Consistency: <strong id="consistencyStreak">0 days</strong></p>
          </div>
          
          <div class="content-block quick-add">
            <h3>‚ö° Quick Add Task</h3>
            <form id="quickTaskForm">
              <input type="text" id="quickTaskTitle" class="form-input" placeholder="e.g., Read chapter 5" required>
              <select id="quickTaskSubject" class="form-input">
                <option value="General">General</option>
              </select>
              <button type="submit" class="btn" title="Add Quick Task">Add</button>
            </form>
          </div>
          
          <div class="content-block activity-feed">
            <h3>Recent Activity</h3>
            <ul id="activityList">
              <li>No recent activity.</li>
            </ul>
          </div>
        </div>

        <div class="content-block task-manager">
          <div class="tasks-header">
            <h2>üìù My Tasks</h2>
            <div class="task-actions-header">
              <button id="addTaskBtn" class="btn">
                <span>Add New Task</span>
                <div class="loading-indicator" style="display: none;"></div>
              </button>
              <button id="markAllDoneBtn" class="btn outline small">Mark Practiced Done</button>
            </div>
            <div class="task-filters">
              <button class="btn icon-btn" id="sortTasksByDateBtn" title="Sort by Date">üìÖ</button>
              <button class="btn icon-btn" id="sortTasksByPriorityBtn" title="Sort by Priority">!</button>
              <label class="toggle-switch-label">
                Show Done
                <label class="toggle-switch small-toggle">
                  <input type="checkbox" id="showCompletedToggle">
                  <span></span>
                </label>
              </label>
            </div>
          </div>

          <form id="taskForm" class="task-form-collapsed">
            <input type="hidden" id="editTaskId">
            <div class="form-grid">
              <div class="form-group-full">
                <label for="taskTitle">Task Title</label>
                <input type="text" id="taskTitle" class="form-input" placeholder="What's the task?" required>
              </div>
              <div class="form-group">
                <label for="taskSubject">Subject</label>
                <input type="text" id="taskSubject" list="subjectSuggestions" class="form-input" placeholder="e.g., Math">
                <datalist id="subjectSuggestions"></datalist>
              </div>
              <div class="form-group">
                <label for="taskDate">Due Date</label>
                <input type="date" id="taskDate" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="taskPriority">Priority</label>
                <select id="taskPriority" class="form-input">
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                  <option value="low">Low</option>
                </select>
              </div>
              <div class="form-group">
                <label for="taskNotes">Notes (optional)</label>
                <input type="text" id="taskNotes" class="form-input" placeholder="Details...">
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn">Save Task</button>
              <button type="button" id="clearFormBtn" class="btn outline">Clear</button>
            </div>
          </form>

          <div id="tasksList" class="tasks-list">
          </div>
        </div>
      </section>
      
      <section id="assistantSection" data-view="assistant" hidden>
        <div class="ai-chat-view">
          <div class="ai-header">
            <h2>ü§ñ AI Assistant</h2>
            <button id="clearChatBtn" class="btn small outline danger" title="Clear Chat History">Clear Chat</button>
          </div>
          <div class="chat-container">
            <div class="chat-messages" id="chatMessages"></div>
            <div id="typingIndicator" class="chat-message from-bot typing" style="display: none;">
              <p><i>Thinking...</i></p>
            </div>
            <form class="chat-input-form" id="chatForm">
              <input type="text" id="chatInput" placeholder="Ask about subjects, tasks, or study tips..." autocomplete="off">
              <button type="submit" class="btn" id="chatSendBtn">
                <span>Send</span>
                <span class="loading-indicator" style="display: none;"></span>
              </button>
            </form>
          </div>
        </div>
      </section>

      <section id="scheduleSection" data-view="schedule" hidden>
        <div class="content-block">
          <h2>üóì Upcoming Schedule</h2>
          <div id="scheduleTaskList" class="schedule-task-list">
          </div>
        </div>
      </section>

      <section id="wellnessSection" data-view="wellness" hidden>
        <div class="overview-grid">
          <div class="content-block wellness-feature">
            <h3>Mindful Breathing</h3>
            <p>Sync your breathing with the circle.</p>
            <div class="breathing-container">
              <div class="breathing-circle" id="breathingCircle"></div>
              <p id="breathingInstruction">Breathe in...</p>
            </div>
            <button id="changeWellnessGameBtn" class="btn outline small">Change Exercise</button>
          </div>
          <div class="content-block wellness-feature">
            <h3>üí° Wellness Tip</h3>
            <p id="wellnessTipText" class="wellness-tip">Remember to stand up and stretch every 30-60 minutes to keep your blood flowing!</p>
          </div>
        </div>
      </section>

      <section id="profileSection" data-view="profile" hidden>
        <div class="content-block">
          <h2>üë§ User Profile</h2>
          <div class="profile-header">
            <div class="profile-avatar-large" id="profileAvatarLarge">
            </div>
            <div class="profile-info">
              <h3 id="profileUserName">User Name</h3>
              <p id="profileUserEmail">user@example.com</p>
              <p class="profile-join-date">Member since <span id="profileJoinDate">January 2024</span></p>
            </div>
          </div>

          <div class="profile-content">
            <div class="profile-stats-grid">
              <div class="stat-card">
                <div class="stat-number" id="statTotalTasks">0</div>
                <div class="stat-label">Total Tasks</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="statCompletedTasks">0</div>
                <div class="stat-label">Completed</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="statCurrentStreak">0</div>
                <div class="stat-label">Day Streak</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="statQuizzesTaken">0</div>
                <div class="stat-label">Quizzes Taken</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="statFocusHours">0</div>
                <div class="stat-label">Focus Hours</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="statSubjects">0</div>
                <div class="stat-label">Subjects</div>
              </div>
            </div>

            <div class="profile-details-grid">
              <div class="profile-section">
                <h3>Personal Information</h3>
                <form id="profileForm" class="profile-form">
                  <div class="form-group">
                    <label for="profileUsername">Username</label>
                    <input type="text" id="profileUsername" class="form-input" required>
                  </div>
                  <div class="form-group">
                    <label for="profileEmail">Email</label>
                    <input type="email" id="profileEmail" class="form-input">
                  </div>
                  <div class="form-group">
                    <label for="profileStudyFocus">Primary Study Focus</label>
                    <input type="text" id="profileStudyFocus" class="form-input" list="focusSuggestions">
                    <datalist id="focusSuggestions">
                      <option value="Computer Science">
                      <option value="Mathematics">
                      <option value="Physics">
                      <option value="Biology">
                      <option value="Chemistry">
                      <option value="Engineering">
                      <option value="Business">
                      <option value="Medicine">
                      <option value="Law">
                      <option value="Arts">
                    </datalist>
                  </div>
                  <div class="form-group">
                    <label for="profileBio">Bio</label>
                    <textarea id="profileBio" class="form-input" rows="3" placeholder="Tell us about your learning goals..."></textarea>
                  </div>
                  <button type="submit" class="btn" id="saveProfileBtn">Save Changes</button>
                </form>
              </div>

              <div class="profile-section">
                <h3>Avatar Customization</h3>
                <div class="avatar-customization-preview">
                  <div id="currentAvatarDisplay" class="avatar-display-large">
                  </div>
                  <div class="avatar-options-grid">
                    <button class="avatar-style-option" data-style="initial">
                      <div class="avatar-style-preview">
                        <div class="avatar-initial">U</div>
                      </div>
                      <span>Initial</span>
                    </button>
                    <button class="avatar-style-option" data-style="gradient">
                      <div class="avatar-style-preview">
                        <div class="avatar-gradient" style="background: linear-gradient(135deg, #FF6B6B, #4ECDC4)">U</div>
                      </div>
                      <span>Gradient</span>
                    </button>
                    <button class="avatar-style-option" data-style="icon">
                      <div class="avatar-style-preview">
                        <i class="fas fa-user-graduate avatar-icon"></i>
                      </div>
                      <span>Icon</span>
                    </button>
                    <button class="avatar-style-option" data-style="pattern">
                      <div class="avatar-style-preview">
                        <div class="avatar-pattern avatar-pattern-1">U</div>
                      </div>
                      <span>Pattern</span>
                    </button>
                  </div>
                  <button id="randomizeAvatarBtn" class="btn outline small">Randomize Avatar</button>
                </div>
              </div>
            </div>

            <div class="profile-section full-width">
              <h3>Study Analytics</h3>
              <div class="analytics-chart" id="studyAnalyticsChart">
                <canvas id="analyticsCanvas" width="400" height="200"></canvas>
              </div>
              <div class="analytics-stats">
                <div class="analytics-stat">
                  <span class="stat-value" id="avgStudyTime">0h</span>
                  <span class="stat-label">Avg. Daily Study</span>
                </div>
                <div class="analytics-stat">
                  <span class="stat-value" id="completionRate">0%</span>
                  <span class="stat-label">Completion Rate</span>
                </div>
                <div class="analytics-stat">
                  <span class="stat-value" id="topSubject">-</span>
                  <span class="stat-label">Top Subject</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="settingsSection" data-view="settings" hidden>
        <h2>‚öôÔ∏è Settings</h2>
        <div class="content-block">
          <h3>Preferences</h3>
          <div class="settings-list">
            <div class="setting-item">
              <label for="darkModeToggle">Dark Mode</label>
              <label class="toggle-switch">
                <input type="checkbox" id="darkModeToggle">
                <span></span>
              </label>
            </div>
            <div class="setting-item">
              <label for="notificationToggle">Enable Reminders</label>
              <label class="toggle-switch">
                <input type="checkbox" id="notificationToggle">
                <span></span>
              </label>
            </div>
            <div class="setting-item">
              <label for="autoSaveToggle">Auto-save Progress</label>
              <label class="toggle-switch">
                <input type="checkbox" id="autoSaveToggle" checked>
                <span></span>
              </label>
            </div>
          </div>
          <h3>Data Management</h3>
          <div class="settings-list">
            <div class="setting-item">
              <span>Storage Usage</span>
              <span id="storageUsage">0 keys</span>
            </div>
            <div class="setting-item">
              <label>Export Data</label>
              <button id="exportDataBtn" class="btn outline">Export</button>
            </div>
            <div class="setting-item">
              <label>Clear All Data</label>
              <button id="clearDataBtn" class="btn danger">Clear Data</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
  
  <div id="toastContainer"></div>

  <div id="quizModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-content">
      <button class="close-modal-btn" id="closeQuizModal" title="Close Quiz">&times;</button>
      <div id="quizContainer" class="quiz-container">
        <h3 id="quizQuestion">Question</h3>
        <div id="quizOptions" class="quiz-options"></div>
        <div class="quiz-footer">
          <div class="quiz-progress" id="quizProgressText">0 / 50</div>
          <button id="nextQuizQuestion" class="btn">Next</button>
        </div>
      </div>
      <div id="quizResults" class="quiz-results" style="display:none;">
        <h3>Quiz Complete!</h3>
        <p>You scored <strong id="quizScore">0</strong> out of <span id="quizTotalQuestions">50</span></p>
        <div class="results-actions">
          <button id="restartQuiz" class="btn">Practice Again</button>
          <button id="closeResultsBtn" class="btn outline">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="confirmModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-content small-modal">
      <h3 id="confirmTitle">Confirm Action</h3>
      <p id="confirmMessage">Are you sure?</p>
      <div class="confirm-actions">
        <button id="confirmYesBtn" class="btn danger">Yes, Proceed</button>
        <button id="confirmNoBtn" class="btn outline">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="firebase-config.js"></script>
  <script src="script.js" defer></script>
  <script src="script.js"></script>
</body>
</html>

